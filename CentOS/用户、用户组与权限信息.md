# Linux用户管理模式

Linux 是 **多用户、多任务操作系统**，本质上允许多人同时登录并操作（比如远程服务器可能有管理员、开发、运维等不同角色）

用户和用户组的核心作用就是 **“身份识别”+“权限控制”**：通过给用户分配不同身份，给用户组分配不同权限，实现 “人 - 组 - 权限” 的分层管理，既灵活又安全

## 用户
用户是 Linux 中最小的 “操作主体”，每个用户都有唯一的 **用户 ID（UID）**（系统底层通过 UID 识别用户，而非用户名），且对应不同的 “权限等级”。
### 三类核心用户（按权限等级划分）

Linux 中用户按权限从高到低，主要分为三类，本质是通过 **UID 范围** 区分（不同发行版 UID 范围可能略有差异，以下为通用标准）：

|用户类型|作用说明|UID 范围|典型示例|
|---|---|---|---|
|超级用户（root）|拥有系统 **全部权限**（可修改任何文件、删除任何进程、执行任何命令），是系统最高管理者|UID = 0|`root`（唯一默认超级用户）|
|系统用户|用于运行系统服务 / 进程（而非供人登录），权限严格受限（仅满足服务运行需求）|UID 1~999|`www-data`（运行 Nginx/Apache）、`mysql`（运行 MySQL 服务）|
|普通用户|供实际使用者登录，权限仅局限于自己的家目录（`/home/用户名`）及管理员授权的资源|UID 1000~65535|管理员创建的 `user1`、`dev` 等|

## Linux 用户组（Group）：“用户的集合”，实现批量权限管理

用户组是将 **多个具有相同权限需求的用户归类** 的机制 —— 比如 “开发组（dev）” 的所有用户都需要读写 `/opt/project` 目录，只需给 “dev 组” 分配该目录的权限，无需逐个给用户授权，大幅简化权限管理。

---

# 用户与用户组管理
***以下命令需要root用户执行！！***
忘记了root账户的话点[[root用户|这里]]

以下是常用的管理命令（需 root 权限，普通用户需加 `sudo`）：

## 1. 用户管理命令

| 命令               | 作用说明                          | 示例                              |
| ---------------- | ----------------------------- | ------------------------------- |
| `useradd 用户名`    | 创建新用户 `-g`指定主组  `-G`指定附加组<br> | `useradd dev1`（创建普通用户 dev1）     |
| `passwd 用户名`     | 给用户设置密码（普通用户可改自己的密码）          | `passwd dev1`（设置 dev1 的密码）      |
| `userdel -r 用户名` | 删除用户（`-r` 同时删除家目录）            | `userdel -r dev1`（删除 dev1 及家目录） |
| `id 用户名`         | 查看用户的 UID、GID、所属组             | `id dev1`（显示 dev1 的 UID、主组、附加组） |
| `su - 用户名`       | 切换到指定用户（`-` 表示加载用户环境）         | `su - dev1`（切换到 dev1 用户）        |

## 2. 用户组管理命令

|命令|作用说明|示例|
|---|---|---|
|`groupadd 组名`|创建新用户组|`groupadd project`（创建 project 组）|
|`usermod -aG 组名 用户名`|将用户加入附加组（`-a` 避免覆盖原有附加组）|`usermod -aG project dev1`（将 dev1 加入 project 组）|
|`groupdel 组名`|删除用户组（需先确保组内无用户）|`groupdel project`（删除 project 组）|
|`groups 用户名`|查看用户所属的所有组（主组 + 附加组）|`groups dev1`（显示 dev1 的所有组）|


**getent**
使用getent命令，可以查看当前系统中有哪些用户
语法：`getent passwd
输出七份信息：
用户名：密码：用户ID：组ID：描述信息：HOME目录：执行终端（默认bash）

---

# 认知权限信息
通过`ls -l`可以以列表形式查看内容并显示权限细节
![[ls -l权限查看.png]]
* 表示文件文件夹的权限控制信息细节
* 表示文件文件夹所属用户
* 表示文件文件夹所属用户组

## 权限细节
权限细节总共分为十个槽位
![[权限细节槽位.png]]
第一部分：“-”表示文件，“d”表示文件夹，“l”表示软连接
第二部分：表示所属用户权限，如果没有的权限用“-”表示
第三部分：表示所属用户组权限，如果没有的权限用“-”表示 
第三部分：表示其他用户权限，如果没有的权限用“-”表示

针对文件和文件夹的不同，rwx含义有差别
* r：针对文件可以查看文件内容，针对文件夹，可以查看文件夹内容，如ls命令
* w：针对我呢见表示可以修改文件，针对文件夹可以在文件夹内创建删除改名等操作
* x：针对文件表示可以将文件作为程序执行，针对文件夹，表示可以更改工作目录到此文件夹，即cd命令进入

## 权限信息修改

点[[bash#权限信息修改|这里]]
