### 一、核心宏包（必须 / 推荐加载）

|宏包名称|功能说明|加载方式|
|---|---|---|
|`graphicx`|最基础的图片处理宏包，支持插入、缩放、旋转图片，是图片操作的 “核心工具”|`\usepackage{graphicx}`|
|`caption`|自定义图片标题（`caption`）格式（如字体、编号、间距），支持无浮动环境的标题|`\usepackage{caption}`|
|`subcaption`|实现 “子图” 排版（多个小图并排，共享一个主标题）|`\usepackage{subcaption}`|
|`float`|提供 `[H]` 参数（强制图片在当前位置，不浮动），增强 `figure` 环境的位置控制|`\usepackage{float}`|
|`placeins`|用 `\FloatBarrier` 限制浮动体范围，防止图片 “跨区域” 浮动|`\usepackage{placeins}`|
|`tikz`|（进阶）绘制矢量图形（流程图、示意图等），无需外部图片文件|`\usepackage{tikz}`|

### 二、图片插入与基础控制（`graphicx` 宏包）

#### 1. 核心命令：`\includegraphics`

用于插入图片，**所有图片尺寸、格式、位置的控制都基于此命令**。

- 基本语法：
```latex
\includegraphics[<选项>]{<图片路径>}
```

- 常用 “选项”（控制图片大小、格式）：

| 选项                       | 功能说明                                  | 示例                                          |
| ------------------------ | ------------------------------------- | ------------------------------------------- |
| `width`                  | 设置图片宽度（支持 `cm`、`\textwidth` 等单位）      | `width=8cm`<br><br>`width=0.8\textwidth`    |
| `height`                 | 设置图片高度（同理，自动等比例缩放宽度）                  | `height=5cm`<br><br>`height=0.3\textheight` |
| `scale`                  | 按比例缩放图片（1 = 原尺寸，0.5 = 缩小 50%）         | `scale=0.7`                                 |
| `keepaspectratio`        | 保持图片宽高比（避免变形，通常与 `width`/`height` 配合） | `keepaspectratio, width=8cm`                |
| `angle`                  | 旋转图片（单位：度，正数顺时针，负数逆时针）                | `angle=90`（顺时针旋转 90 度）                      |
| `max width`/`max height` | 限制图片最大宽 / 高（图片小于限制则不变，大于则缩放）          | `max width=0.9\textwidth`                   |
#### 2. 图片格式支持

`graphicx` 原生支持 **.pdf、.png、.jpg、.jpeg** 格式；若需插入 .eps 格式（矢量图），需配合 `epstopdf` 宏包（自动将 .eps 转 .pdf）：

```latex
\usepackage{epstopdf} % 文档开头加载
\includegraphics{example.eps} % 直接插入.eps文件
```

### 三、图片排版环境（控制位置、标题、引用）

#### 1. 基础浮动环境：`figure`

用于 “包裹” 图片，实现**自动排版（浮动）、加标题、加标签（引用）**。

- 基本语法：
```latex
\begin{figure}[<位置参数>]
    \centering % 图片居中（可选）
    \includegraphics[<选项>]{<图片路径>}
    \caption{<图片标题>} % 必选，自动编号
    \label{<标签名>} % 可选，用于后文引用（如“见图\ref{<标签名>}”）
\end{figure}
```

- 位置参数说明（控制图片浮动优先级）：

|参数|含义|
|---|---|
|`h`|尝试放在当前位置（here）|
|`t`|尝试放在页顶（top）|
|`b`|尝试放在页底（bottom）|
|`p`|放在单独的 “浮动页”（page）|
|`!`|加在参数前（如 `!h`），表示 “强制尝试”|


#### 2. 强制固定位置：`[H]` 参数（需 `float` 宏包）

若需图片**绝对固定在文字之间**，用 `[H]` 替代默认位置参数：

```latex
\usepackage{float} % 必须加载
\begin{figure}[H] % 强制在当前位置，不浮动
  \centering
  \includegraphics[width=0.8\textwidth]{Hilda.png}
  \caption{固定位置的图片}
\end{figure}
```

#### 3. 无浮动环境的标题：`\captionof`（需 `caption` 宏包）

若不想用 `figure` 浮动环境，直接给图片加标题，用 `\captionof{类别}{标题}`：

latex

```latex
\usepackage{caption} % 必须加载
\begin{center}
  \includegraphics[width=0.8\textwidth]{Hilda.png}
  \captionof{figure}{无浮动环境的图片标题} % 类别填“figure”
  \label{fig:fixed}
\end{center}
```

### 四、子图排版（多个图片并排，`subcaption` 宏包）

当需要 “多图并排 + 各自子标题 + 主标题” 时，用 `subfigure` 环境（需 `subcaption` 宏包）。

- 示例代码：
```latex
    \usepackage{subcaption} % 文档开头加载
    
    \begin{figure}[H]
      \centering
      % 子图1
      \begin{subfigure}[b]{0.45\textwidth} % [b]底部对齐，宽度占页面45%
        \centering
        \includegraphics[width=\linewidth]{fig1.png} % \linewidth 表示子图宽度
        \caption{子图1标题}
        \label{subfig:1}
      \end{subfigure}
      \hfill % 子图之间留白
      % 子图2
      \begin{subfigure}[b]{0.45\textwidth}
        \centering
        \includegraphics[width=\linewidth]{fig2.png}
        \caption{子图2标题}
        \label{subfig:2}
      \end{subfigure}
      \caption{主标题：两个子图的对比} % 主标题
      \label{fig:sub}
    \end{figure}
```

- 效果：两个子图并排，各有子标题，整体有主标题，可分别引用（如 “见图 \ref {subfig:1}”）。

### 五、图片美化与进阶需求

#### 1. 图片边框与背景

用 `tikz` 宏包给图片加边框、背景色（进阶）：

latex

```latex
\usepackage{tikz}
\begin{tikzpicture}
  \node[draw=red, thick, fill=gray!10, inner sep=5pt] {
    \includegraphics[width=0.8\textwidth]{Hilda.png}
  };
\end{tikzpicture}
```

- `draw=red`：红色边框；`thick`：边框加粗；`fill=gray!10`：浅灰色背景；`inner sep`：内边距。

#### 2. 图片裁剪（`trim` 和 `clip` 选项）

截取图片的局部区域：

latex

```latex
\includegraphics[trim={1cm 2cm 3cm 4cm}, clip, width=0.8\textwidth]{Hilda.png}
```

Hlida ->![[Hlida.jpg|100]]

- `trim={左 下 右 上}`：按厘米裁剪边缘；`clip`：启用裁剪（必须加，否则不生效）。

#### 3. 跨栏图片（双栏文档）

在双栏文档中（如 `\documentclass[twocolumn]{article}`），让图片跨两栏显示，用 `figure*` 环境：

latex

```latex
\begin{figure*}[H]
  \centering
  \includegraphics[width=0.9\textwidth]{Hilda.png}
  \caption{跨两栏的图片}
\end{figure*}
```

### 六、常见问题与解决方案

|问题|原因|解决方案|
|---|---|---|
|图片不显示，报错 “File not found”|图片路径错误或格式不支持|检查路径（绝对 / 相对路径）、确认格式（.pdf/.png/.jpg 等）|
|图片变形（宽高比异常）|同时手动设置 `width` 和 `height` 且未加 `keepaspectratio`|加 `keepaspectratio` 或只设一个维度（`width` 或 `height`）|
|图片标题格式不满意|需自定义标题样式|用 `caption` 宏包的 `\captionsetup` 命令（如 `\captionsetup{font=small, labelfont=bf}`）|
